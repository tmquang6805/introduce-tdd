### Mock Test (cont.)

```javascript
it('should not get error when everything is ok', function (done) {
  userModelMock
    .expects('findOne').withArgs({email: email})
    .chain('exec')
    .resolves({
      _id: 1,
      email: email,
      password: hash
    });

  userModel.findUser(email, password, function (error, data) {
    userModelMock.verify();
    sinon.assert.called(compareSync);
    expect(error).to.be.null;
    expect(data).not.be.null;
    done();
  });
});
```