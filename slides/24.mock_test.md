### Mock Test (cont.)

```javascript
it('should get error status equal 500 when model crash', function (done) {

  userModelMock
    .expects('findOne').withArgs({email: email})
    .chain('exec')
    .rejects(new Error('Oops! Crashed'));

  userModel.findUser(email, password, function (error) {
    userModelMock.verify();
    sinon.assert.notCalled(compareSync);
    expect(error).not.be.null;
    expect(error.status).to.eql(500);
    done();
  });

});
```