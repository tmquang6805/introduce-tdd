### Supertest for API

```javascript
router.post('/token', function getJWT(req, res, next) {

  var email = req.body.email || null,
    password = req.body.password || null;

  user.findUser(email, password, function (error, id) {
    if (error) {
      return next(error);
    }

    var expireAt = parseInt(Date.now() / 1000) + 7 * 24 * 3600;
    var encrypted = crypt.encrypt(id);
    var payload = {id: encrypted, expire_at: expireAt};
    var token = jwt.encode(payload, config.jwt_secret);

    res.json({token: token, token_type: "JWT", expire_at: expireAt});
  });

});
```