### Mock Test (cont.)

```javascript
it('should get error when not match password', function (done) {
  userModelMock
    .expects('findOne').withArgs({email: email})
    .chain('exec')
    .resolves({
      _id: 1,
      email: email,
      password: 'wrong'
    });

  userModel.findUser(email, password, function (error) {
    userModelMock.verify();
    sinon.assert.called(compareSync);
    expect(error).not.be.null;
    done();
  });
});
```